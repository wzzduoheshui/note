# ğŸEffective C++

---

## ğŸš—è®©è‡ªå·±ä¹ æƒ¯C++

---

### ğŸ‘‰æ¡æ¬¾01ï¼šè§†C++ä¸ºä¸€ä¸ªè¯­è¨€è”é‚¦

> **C++é«˜æ•ˆç¼–ç¨‹å®ˆåˆ™è§†çŠ¶å†µè€Œå˜åŒ–ï¼Œè¿™å–å†³äºä½ ä½¿ç”¨C++çš„å“ªä¸€éƒ¨åˆ†**

* **`C`**

  è¿™éƒ¨åˆ†ä¸»è¦æ˜¯è¯´`C++`ä¾æ—§æ˜¯ä»¥`C`è¯­è¨€ä¸ºåŸºç¡€ï¼Œå…¶ä¸­çš„é¢„å¤„ç†å™¨ã€æ•°ç»„ã€å†…ç½®æ•°æ®ç±»å‹ã€æŒ‡é’ˆç­‰ç»Ÿç»Ÿæ¥è‡ªäº`C`ã€‚ä½†æ˜¯å¯¹äº`C`æ¥ä¹¦ä¾æ—§æœ‰ä»–çš„å±€é™ï¼Œæ²¡æœ‰æ¨¡æ¿ï¼Œæ²¡æœ‰é‡è½½ï¼Œæ²¡æœ‰ç¼ºçœâ€¦â€¦

* **`Object-Oriented C++`**

  è¿™éƒ¨åˆ†ä¸»è¦æ˜¯å®Œæˆäº†é¢å‘å¯¹è±¡æ–¹å‘çš„è¯‰æ±‚ï¼Œå³æ„é€ ã€ææ„ã€å°è£…ã€ç»§æ‰¿ã€å¤šæ€â€¦â€¦

* **`Template C++`**

  è¿™éƒ¨åˆ†æ˜¯`C++`çš„æ³›å‹ç¼–ç¨‹éƒ¨åˆ†ï¼Œå› ä¸ºæ¨¡æ¿çš„å‡ºç°ï¼Œä¾¿æ·äº†å¾ˆå¤šå·¥ä½œï¼Œ`STL`ä¹Ÿä¾¿åº”è¿è€Œç”Ÿ

* **`STL`**

  `STL`æ˜¯ä¸€ä¸ª`template`ç¨‹åºåº“ï¼Œä»–åŒ…æ‹¬äº†å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€ä»¿å‡½æ•°ã€ç©ºé—´é…ç½®å™¨ã€é…æ¥å™¨ã€‚è‹¥æƒ³æ›´å¥½çš„ä½¿ç”¨`STL`ï¼Œä½ å¿…é¡»éµå®ˆä»–çš„è§„åˆ™

---

### ğŸ‘‰æ¡æ¬¾02ï¼šå°½é‡ä»¥`const`,`enum`,`inline`æ›¿æ¢`#define`

> è®°ä½ä¸€ç‚¹**å®å¯ä»¥ç¼–è¯‘å™¨æ›¿æ¢é¢„å¤„ç†å™¨** 

```c
#define ASPECT_RATIO 1.653
```

å…³äºè¿™ä¸ªä¹Ÿè®¸åœ¨ç¼–è¯‘å™¨è¿˜æ²¡å¼€å§‹å¤„ç†æºç å‰å°±è¢«é¢„å¤„ç†å™¨ç§»èµ°äº†ï¼Œ`ASPECT_RATIO`ä¹Ÿè®¸å¹¶æœªè¢«ç¼–è¯‘å™¨çœ‹è§ï¼Œè¿™ä¸ªåç§°å¯èƒ½å¹¶æœªè¿›å…¥ç¬¦å·è¡¨ã€‚

è§£å†³åŠæ³•ä¾¿æ˜¯ä»¥å¸¸é‡æ›¿æ¢å®

```c
const double AspectRatio = 1.653;
```

---

####  **`class`å†…ä¸“å±å¸¸é‡é‡‡ç”¨"in-classåˆå€¼è®¾å®š"**

"in-classåˆå€¼è®¾å®š"çš„æ¡ä»¶

> é€šå¸¸C++è¦æ±‚å¯¹æ¯ä¸€ä¸ªä½¿ç”¨çš„ä¸œè¥¿éƒ½è¦æœ‰å®šä¹‰
>
> 1. å¦‚æœæ˜¯classä¸“å±å¸¸é‡
> 2. æ˜¯æ•´æ•°ç±»å‹ï¼ˆä¾‹å¦‚intsï¼Œcharsï¼Œboolsï¼‰

å…³äºclasså†…ä¸“å±å¸¸é‡

>   1. é¦–å…ˆä¸ºäº†é™åˆ¶ä½œç”¨åŸŸï¼Œå¿…é¡»å°†å…¶æ”¾åœ¨`class`å†…æˆä¸ºä¸€å`class`çš„æˆå‘˜
>   2. å…¶æ¬¡ä¸ºäº†ç¡®ä¿å¸¸é‡è‡³å¤šåªæœ‰ä¸€ä»½å®ä½“ï¼Œå¿…é¡»è®©ä»–ç§°ä¸º`static`æˆå‘˜

```cpp
class A
{
private:
	static const int number = 1;
    int _a[number];
};
```

* ä½†æ˜¯å¯¹äºè¿™ä¸ªAè¿™ä¸ªç±»æ¥è¯´`static const int Number = 1;`æ˜¯å£°æ˜è€Œéå®šä¹‰ã€‚

* äº‹å®è¯æ˜åªè¦ä¸å–numberçš„åœ°å€ï¼Œå¯ä»¥åªé‡‡å–å£°æ˜è€Œä¸éœ€è¦å®šä¹‰ã€‚ï¼ˆå¹¶ä¸”numberå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼‰

  > ä»¥ä¸‹æ˜¯å®è·µè¿‡ç¨‹:
  >
  > ```cpp
  > // test.h
  > #include <iostream>
  > #include <string>
  > 
  > class A {
  > public:
  > 	void print()
  > 	{
  >         std::cout << number << std::endl;// å¯ä»¥æ­£å¸¸è¿è¡Œ
  > 
  > 		// const int* p = &number;
  > 		// std::cout << p << std::endl;// æ— æ³•æ­£å¸¸è¿è¡Œ
  > 	}
  > private:
  > 	static const int number = 5;
  > 	int _a[number];
  > };
  > 
  > /************************************************************************/
  > // main.cpp
  > #include "test.h"
  > 
  > int main()
  > {
  > 	A a1;
  > 	A a2;
  > 
  >     std::cout << sizeof(a1) << std::endl;
  >     std::cout << sizeof(a2) << std::endl;
  > 
  > 	a1.print();
  > 	a2.print();
  > 
  >     return 0;
  > }
  > ```
  >
  > ![ka](https://dhrs-oss.oss-cn-beijing.aliyuncs.com/img/safsafadofa.png)

* å¦‚æœå¿…é¡»è¦å–åˆ°numberçš„åœ°å€ï¼Œæˆ–è€…æ˜¯ç¼–è¯‘å™¨åšæŒéœ€è¦å®šä¹‰numberï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä»»æ„ä¸€ä¸ª.cppæ–‡ä»¶ä¸­å¯¹numberè¿›è¡Œå®šä¹‰ã€‚

  ```cpp
  const int A::number;// numberçš„å®šä¹‰
  ```

  > **åœ¨å®šä¹‰å¼æ—¶æˆ‘ä»¬ä¸éœ€è¦å¯¹numberè¿›è¡Œèµ‹å€¼**ï¼Œå› ä¸ºåœ¨numberçš„å£°æ˜ä¸­å°±å·²ç»ç»™äºˆäº†numberåˆå€¼ï¼Œè€Œnumberæ˜¯constå†æ¬¡èµ‹å€¼ä¼šæŠ¥é”™ã€‚
  > 
  > 
  > 
  > **å®šä¹‰å¼éœ€è¦æ”¾åœ¨ä»»æ„ä¸€ä¸ª.cppï¼ˆå®ç°æ–‡ä»¶/æºæ–‡ä»¶ï¼‰ä¸­**ï¼Œè¿™ä¸ªåŸå› è§ä¸‹ï¼š
  >
  > > 1. å¦‚æœæ”¾åœ¨.hï¼ˆå¤´æ–‡ä»¶ï¼‰ä¸­ï¼Œæ”¾åœ¨`class A{};`å£°æ˜ä¹‹å‰ï¼Œä¼šç”±äº`class A`æœªè¢«å£°æ˜è€ŒæŠ¥é”™
  >> 2. å¦‚æœæ”¾åœ¨.hï¼ˆå¤´æ–‡ä»¶ï¼‰ä¸­ï¼Œæ”¾åœ¨`class A{};`å£°æ˜ä¹‹åï¼Œå¦‚æœæ­¤æ—¶é¡¹ç›®å†…æœ‰å¤šä¸ª.cppæ–‡ä»¶åŒ…å«äº†è¯¥å¤´æ–‡ä»¶ï¼Œåœ¨é¢„å¤„ç†é˜¶æ®µå¤´æ–‡ä»¶ä¼šè¢«å±•å¼€ï¼Œå°±ä¼šå‡ºç°é‡å®šä¹‰çš„ç°è±¡è¿›è€ŒæŠ¥é”™ï¼ˆè¿™é‡Œæˆ‘è”æƒ³åˆ°äº†å¤´æ–‡ä»¶ä¸­çš„externï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ—¶externåé¢è·Ÿçš„æ—¶å£°æ˜è€Œéå®šä¹‰ï¼‰

* å€¼å¾—æ³¨æ„çš„æ˜¯å°½ç®¡`const`å¦‚æ­¤éº»çƒ¦ï¼Œä½†æ˜¯`#define`æ— æ³•åˆ›å»ºä¸€ä¸ª`class`ä¸“å±å¸¸é‡ã€‚å®ä¸€æ—¦è¢«å®šä¹‰å°±åœ¨å…¶åçš„ç¼–è¯‘è¿‡ç¨‹ä¸€ç›´æœ‰æ•ˆï¼Œç›´åˆ°åœ¨æŸå¤„é‡è§äº†`#undef`ã€‚ä¹Ÿæ­£å¦‚æ­¤`#define`ä¹Ÿæ— æ³•æä¾›ä»»ä½•å°è£…æ€§

---

#### **é‡‡ç”¨â€œthe enum hackâ€è¡¥å¿constæ— æ³•ä½¿ç”¨**

**"in-classåˆå€¼è®¾å®š"ä¹Ÿæœ‰ç¼ºç‚¹**

> *  å¦‚æœç¼–è¯‘å™¨ä¸å…è®¸`static`æˆå‘˜åœ¨å£°æ˜æ—¶è¿›è¡Œèµ‹å€¼
> * æ‰€è°“çš„"in-classåˆå€¼è®¾å®š"ä¹Ÿåªå…è®¸å¯¹æ•´æ•°å¸¸é‡è¿›è¡Œ





