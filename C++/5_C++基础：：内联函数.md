@ [TOC]()

# 5_C++基础：：内联函数

---

## 什么是内联函数？有什么作用？

C++内联函数是在程序执行时直接将函数体代码嵌入到调用函数处，而不是通过函数调用的方式执行。内联函数的定义使用关键字"inline"，一般在函数声明的前面加上"inline"就可以定义内联函数。例如：

```cpp
inline int add(int a, int b) {
    return a + b;
}
```

内联函数的主要用途是提高程序的执行效率，因为内联函数的调用不需要进入函数栈和返回，所以可以避免函数调用的开销。同时，内联函数还可以减少代码的大小，因为函数体代码被直接嵌入到调用处，避免了函数调用和返回的额外指令。但是，需要注意的是，如果内联函数过于复杂，可能会增加代码大小，反而降低程序执行效率。因此，合理使用内联函数可以使程序更加高效。

---

## 宏函数和内联函数

由此看来，C既然已经有了宏函数，为什么C++还要引入内联函数呢？

> C语言中的宏函数（在预处理中采取替换机制）
>
> * 优点：代码的可维护性变强（对于宏常量来说）、宏函数可以提高效率、减少函数栈帧的建立
>
>   缺点：可读性差、没有类型安全性检查、不方便调试、代码的可维护性变差（对于宏变量来说）

---

C++中的内联函数和宏函数的不同？

内联函数在符合条件的情况下才会在调用的地方展开，

**因为这里只是建议编译器去展开函数，但究竟展不展开决定权在于编译器**

一般来说函数内部代码长的情况下就不展开，容易造成代码冗余